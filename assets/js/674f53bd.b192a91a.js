"use strict";(self.webpackChunkeclassify_docs=self.webpackChunkeclassify_docs||[]).push([[6082],{514:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/package_json-70e22c25ced3ab24c9f6532b4bbffb19.png"},1960:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/port_occupy-358ddb7bd604601c9abd659899cc7427.png"},4513:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/pm2_error-e37242ed716a474471fc6c1068899a5b.png"},5660:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/htaccess_file-d118905f66c62b6469c79d22b4a77520.png"},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>i});var t=s(6540);const r={},o=t.createContext(r);function l(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),t.createElement(o.Provider,{value:n},e.children)}},8784:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>i,default:()=>h,frontMatter:()=>l,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"web-setup/deploy-to-server","title":"Deploy to the Server","description":"Web Automatic Deployment","source":"@site/docs/web-setup/deploy-to-server.md","sourceDirName":"web-setup","slug":"/web-setup/deploy-to-server","permalink":"/eClassify/docs/web-setup/deploy-to-server","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":12,"frontMatter":{"sidebar_position":12},"sidebar":"docs","previous":{"title":"How To Run Web Project","permalink":"/eClassify/docs/web-setup/run-app"},"next":{"title":"Update the Site","permalink":"/eClassify/docs/web-setup/update-site"}}');var r=s(4848),o=s(8453);const l={sidebar_position:12},i="Deploy to the Server",a={},c=[{value:"Web Automatic Deployment",id:"web-automatic-deployment",level:2},{value:"Web Manually Deployment",id:"web-manually-deployment",level:2},{value:"Installing NodeJS",id:"installing-nodejs",level:3},{value:"Installing PM2 Server",id:"installing-pm2-server",level:3},{value:"Set port",id:"set-port",level:3},{value:"Setup the Project",id:"setup-the-project",level:3},{value:"Run the PM2 server",id:"run-the-pm2-server",level:3}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"deploy-to-the-server",children:"Deploy to the Server"})}),"\n",(0,r.jsx)(n.h2,{id:"web-automatic-deployment",children:"Web Automatic Deployment"}),"\n",(0,r.jsxs)(n.p,{children:["Upload your web code to your server, open the terminal, navigate to your web code directory, and run the ",(0,r.jsx)(n.strong,{children:"./install.sh"})," command."]}),"\n",(0,r.jsx)(n.h2,{id:"web-manually-deployment",children:"Web Manually Deployment"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"WARNING"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Deployment of the Next JS needs a bit of knowledge about ",(0,r.jsx)(n.code,{children:"node js"})," ",(0,r.jsx)(n.code,{children:"npm"})," ",(0,r.jsx)(n.code,{children:"pm2"})," technologies. We have assumed that you are using a ",(0,r.jsx)(n.code,{children:"debian"})," based OS, apt is your package manager. If you are using any other linux distro then apt will be replaced with the respective package manager of the OS"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"We do not recommend deploying on shared hosting as it may not support all Node.js features. If you do not have a VPS server, you can proceed with this method, but we cannot provide support for any issues that arise."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Before starting the project deployment, you must upload your project to the server. Project can be upload to the server using ",(0,r.jsx)(n.a,{href:"https://filezilla-project.org/download.php",children:"FileZila"})," or in other ways."]}),"\n",(0,r.jsx)(n.h3,{id:"installing-nodejs",children:"Installing NodeJS"}),"\n",(0,r.jsx)(n.p,{children:"NodeJS can be installed using NVM by which multi Node version can be controlled easily."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo apt install curl\ncurl https://raw.githubusercontent.com/creationix/nvm/master/install.sh | bash\nnvm install node 20.*\n"})}),"\n",(0,r.jsx)(n.p,{children:"Check if node js is installed correctly using this command:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"node -v\n"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"INFO"})}),"\n",(0,r.jsxs)(n.p,{children:["For more information, use ",(0,r.jsx)(n.a,{href:"https://nodejs.org/docs/latest/api/",children:"official documentation"})]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"installing-pm2-server",children:"Installing PM2 Server"}),"\n",(0,r.jsx)(n.p,{children:"By running the following command, PM2 server can be installed globally:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npm install pm2 -g\n"})}),"\n",(0,r.jsx)(n.h3,{id:"set-port",children:"Set port"}),"\n",(0,r.jsx)(n.p,{children:"Before set port check available ports with this command:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo lsof -i -P -n | grep 8003\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Port Occupied",src:s(1960).A+"",width:"1676",height:"849"})}),"\n",(0,r.jsx)(n.p,{children:"If you get response like this it means this port is occupy with other project so try other port like (8000, 8001, 8002, 8003, 8004 etc)"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Available Port",src:s(9966).A+"",width:"1676",height:"849"})}),"\n",(0,r.jsx)(n.p,{children:"If you get response like this it means this port is available you can use this port"}),"\n",(0,r.jsxs)(n.p,{children:["Now add available port to your ",(0,r.jsx)(n.code,{children:"package.json"})," and ",(0,r.jsx)(n.code,{children:".htaccess"})," file"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Package JSON",src:s(514).A+"",width:"1920",height:"1052"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"htaccess file",src:s(5660).A+"",width:"1920",height:"1052"})}),"\n",(0,r.jsx)(n.h3,{id:"setup-the-project",children:"Setup the Project"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"MANDATORY"})}),"\n",(0,r.jsxs)(n.p,{children:["Make sure you have ",(0,r.jsx)(n.code,{children:"node_modules"})," installed in your directory."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"For installing package run the following command:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npm install\n"})}),"\n",(0,r.jsxs)(n.p,{children:["The above command will install all the ",(0,r.jsx)(n.strong,{children:"node modules"})," in your directory."]}),"\n",(0,r.jsxs)(n.p,{children:["After that, project must be built. For that, run the following command, which will build the production application in the ",(0,r.jsx)(n.strong,{children:".next"})," folder."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npm run build\n"})}),"\n",(0,r.jsx)(n.h3,{id:"run-the-pm2-server",children:"Run the PM2 server"}),"\n",(0,r.jsx)(n.p,{children:"Go to the project root and run the following command:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'pm2 start "npm start" -n "YOUR_PROJECT_NAME"\n'})}),"\n",(0,r.jsx)(n.p,{children:"Check if pm2 process is Running OK:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"pm2 ls\n"})}),"\n",(0,r.jsx)(n.p,{children:"When you run pm2 ls you will see, 2 types of output:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Error:\n",(0,r.jsx)(n.img,{alt:"PM2 Error",src:s(4513).A+"",width:"1218",height:"101"})]}),"\n",(0,r.jsx)(n.p,{children:"If you are getting errors in the pm2 process, then run pm2 logs and send us the Screenshot of the error, so that we can guide you to resolve your issues."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Success:\n",(0,r.jsx)(n.img,{alt:"PM2 Success",src:s(9306).A+"",width:"1212",height:"96"})]}),"\n",(0,r.jsx)(n.p,{children:"If successful, set up a startup script for your operating system to ensure PM2 restarts automatically after a system reboot."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"pm2 startup\n"})}),"\n",(0,r.jsx)(n.p,{children:"After setting up PM2 with the startup command, save the current process list:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"pm2 save\n"})}),"\n",(0,r.jsx)(n.p,{children:"If you want to restart your pm2 process then run:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"pm2 restart id  # Replace id with your process id\n"})}),"\n",(0,r.jsxs)(n.p,{children:["For example here id is 0 in the above screenshot --\x3e ",(0,r.jsx)(n.code,{children:"pm2 restart 0"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"For deleting the previous project running in the PM2 server, use the following command:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'pm2 delete "YOUR_PROJECT_NAME"\n'})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"INFO"})}),"\n",(0,r.jsxs)(n.p,{children:["For more information, use ",(0,r.jsx)(n.a,{href:"https://pm2.keymetrics.io/docs/usage/quick-start/",children:"official documentation"})]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},9306:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/pm2_success-b2b52074a0c2c50b29fc69e697154f95.png"},9966:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/available_port-a7b70599d1defb9bce070c6b6e71d7e8.png"}}]);